<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastrar Corrida — F1 Insights</title>
  <link rel="stylesheet" href="./assets/css/styles.css">

</head>
<body>

<header class="site-header">
  <div class="container head-wrap">
    <h1 class="logo">F1 <span>Insights</span></h1>
    <nav class="site-nav">
      <ul class="nav-list">
        <li><a href="./index.html">Voltar</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="container section">
  <header class="section-head">
    <h3>Cadastrar Nova Corrida</h3>
  </header>

  <form id="form-corrida" class="form-news" style="display:block; max-width:600px;">

    <div class="field">
      <label>Nome da Corrida</label>
      <input name="nome" type="text" required>
    </div>

    <div class="field">
      <label>Data</label>
      <input name="data" type="date" required>
    </div>

    <div class="field">
      <label>Circuito</label>
      <input name="circuito" type="text" required>
    </div>

    <div class="field">
      <label>País</label>
      <input name="pais" type="text" required>
    </div>

    <div class="field" style="grid-column:1 / -1;">
      <label>Descrição</label>
      <textarea name="descricao" rows="4" required></textarea>
    </div>

    <div class="field" style="grid-column:1 / -1;">
      <label>Imagem (URL)</label>
      <input name="imagem" type="text" required>
    </div>

    <button type="submit" class="btn" style="margin-top:12px;">Cadastrar</button>
  </form>
</main>

<script>
const API = "http://localhost:3000/corridas";

document.getElementById("form-corrida").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;

  const novaCorrida = {
    nome: form.nome.value,
    data: form.data.value,
    circuito: form.circuito.value,
    pais: form.pais.value,
    descricao: form.descricao.value,
    imagem: form.imagem.value
  };

  const res = await fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(novaCorrida)
  });

  if (res.ok) {
    alert("Corrida cadastrada com sucesso!");
    window.location.href = "./index.html";
  } else {
    alert("Erro ao cadastrar corrida.");
  }
});
</script>

</body>
</html>
